#!/bin/bash

source environment.conf

rm -rf $results_path

mkdir code
mkdir results

if [ ! -d $code_path/$promethee_path ]; then
	git clone $promethee_url
	mv $promethee_path $code_path

	cd $code_path/$promethee_path
	git checkout --detach $promethee_version
	cd -
fi

if [ ! -e $code_path/$umbu_caja_path/$tiff_name ]; then
	wget $input_url
	mv $tiff_name $code_path/$umbu_caja_path
fi

echo $tiff_name 1 1 > $code_path/$umbu_caja_path/criteria

cd $code_path/$umbu_caja_path

g++ -std=c++14 umbu.cpp -o umbu -ltiff
g++ -std=c++14 merge.cpp -o merge -ltiff

cd -